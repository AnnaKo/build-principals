apply plugin: 'java'

jar {
    baseName = 'hello'
    project.version = v
    manifest {
        attributes "Main-Class": "com.test.Project"
    }
}

repositories {
    mavenCentral()
}

dependencies {
    compile group: 'commons-collections', name: 'commons-collections', version: '3.0'
    compile group: 'log4j', name: 'log4j', version: '1.2.16'
    testCompile 'junit:junit:4.12'
    compile 'junit:junit:4.12'
}

test {
    useJUnit {
        include '**/*UnitTest*'
    }
    doLast {
        logger.quiet "UnitTest"
    }
    afterTest { 
        desc, result ->
        logger.quiet "UnitTest - ${desc.name} result: ${result.resultType}"
    }
}

task tgzArtifacts(type: Tar) {
    baseName = 'myArtifacts'
    into ('/'){
        from 'build/libs'
        include '*.jar'
    }
    into ('/'){
        from 'build/'
        include 'output.log'
    }
    extension = 'tgz'
    compression = Compression.GZIP
    }

artifacts {
    archives tgzArtifacts
}

task hello(dependsOn: 'test') {
    doLast {
        logger.quiet "task hello"
        logger.quiet "Name and path to tgz"relativePath(tgzArtifacts.archivePath)
    }
}
test.dependsOn assemble
